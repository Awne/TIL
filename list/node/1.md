## NPM 기초 & Express 설치

`NPM`은 라이브러리를 공유하기 위해 사용한다.

바로 시작해보자.

1. 디렉토리 생성 - `npm init` - 질문에 답 - 마지막에 `yes`
2. 위 과정이 끝나면 `package.json`파일이 생성된다.
3. 이후 `npm install express --save`로 `express`를 설치한다.
``` 
`--save`를 추가하면 `package.json`에 의존성이 추가되어
 이 패키지를 통해 `express`를 설치할 수 있다.
```
4. 설치가 끝나면 `node_modules` 디렉토리가 설치되고 `package.json`에 정보가 추가됨.
```
`node_modules`는 설치한 라이브러리를 실행하는데 필요한 파일들이 모여있으며 
직접 접근하는 경우는 거의 없다.
```
5. `app.js` 파일 생성 후 웹서버를 시작한다.

## Express 기반 웹서버 구동

아래는 3000번 포트에서 동작하는 웹서버임.
```javascript
var express = require('express');
var app = express();
app.listen(3000, function() {
    console.log("On port 3000");
})

app.get('/', function(req, res) {
    res.send("<em>On localhost:3000, you can find this message.</em>)
})
```
1. `require`는 `node_modules` 디렉토리에서 `express`구동에 필요한 파일들을 가져오라는 명령
2. 3000번 포트에서 서버를 열고 응답을 듣기위해 계속 대기중인 callback function을 사용.
3. `app.get`요청을 통해 해당 `URL`에 데이터를 전송할 수 있음.

터미널에서 `node app.js`를 입력하여 웹 서버를 실행한다.

이 서버는 `localhost:3000` 또는 `127.0.0.1:3000`으로 접속가능함.

필수는 아니지만 `nodemon`을 설치하면 파일 변화를 감지해 서버를 자동으로 시작/종료시킬 수 있음.

1. `npm install nodemon --save -g`로 설치 (글로벌 설치 권장)
2. 설치 이후부터는 `node app.js` 대신 `nodemon app.js`로 서버를 시작함.

## URL Routing 처리

`get`요청을 통해 해당 `URL`에 데이터를 전송할 수 있음.

1. `public/main.html` 생성하기
2. 아래 코드를 추가하면 해당 `URL`에 `main.html`파일을 전송할 수 있음.
```javascript
app.get('/', function(req, res) {
    res.sendFile(__dirname + "/public/main.html")
})
```
 - 참고로 `__dirname`변수는 루트 디렉토리를 의미함.


## static 디렉토리 설정

이미지, CSS, 자바스크립트 파일들은 서버 요청시 알아서 전송되는게 아니라 따로 전송해주어야함.

이럴때 `static directory`를 사용해야한다.

아래 코드는 `public`디렉토리를 `static directory`로 만드는 코드이다.
```javascript
app.use(express.static('public'))
```