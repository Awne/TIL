## POST 요청 처리

1. `public`디렉토리에 `html` 파일을 하나 만들어 `form` 양식을 만들고 `input text`의 `name`을 `mail`로 만들고 `submit`을 만든다.
2. 이때 `action=/email_post method=POST` 로 설정한다.

```
GET 방식은 url에 데이터를 추가하므로 길이제한이 있고, 보안상에도 우려가 있음.
그래서 사용하는게 POST 방식
```

3. `npm install body-parser --save`로 `body-parser`를 설치해야 `POST`방식으로 데이터를 전송할 수 있음.
4. `body-parser`를 사용하기 위해 아래 코드들을 추가해준다.

```javascript
var bodyParser = require('body-parser')

app.use(bodyParser.json());
app.use(bodyParser.urlencoded({extended : true}));

app.post('/email_post', function(req, res) {
    console.log(req.body.mail);
    res.send(req.body.mail);
})
```
위 코드를 줄별로 해석하면 아래와 같다.
1. `body-parser`를 사용하기 위해 필요 파일들을 요청한다.
2. `JSON`파일들을 받기 위해 선언
3. 다른 파일들을 받기위해 선언. (`JSON`외 파일들은 인코딩 필요)
4. `/email_post` URL로 데이터를 전송한다.
5. 콘솔에 `mail`이라는 이름을 가진 요소를 출력
6. 뷰포트에 `mail`이라는 이름을 가진 요소 출력

## View Engine을 활용한 응답처리

1. `npm install ejs --save`로 `ejs` 뷰 엔진을 설치해준다.
2. 아래 코드를 입력하여 사용할 뷰엔진이 `ejs`라고 알려줌.
```javascript
app.set('view engine', 'ejs)
```

3. `views`라는 이름으로 디렉토리를 만들고, 해당 디렉토리 내에 `email.ejs`파일을 생성한다.
4. 해당 파일은 `HTML`문법을 사용하며 `name`이 `mail`인 요소를 사용하기 위해 `<%=mail>`를 활용한 문서를 작성한다.
5. 다시 `app.js`로 돌아와 `app.post`블록에 아래 코드를 추가해준다.
```javascript
res.render('email.ejs', {'mail' : req.body.mail})
```

6. 위 코드는 `email.ejs`에서는 `mail`을 `req.body.mail`로 대체한다는 의미. 